#!/usr/bin/python

import nmap
import optparse


def NmapScan(host, ports):

	port_scan = nmap.PortScanner()
	port_scan.scan(host, ports)
	state = port_scan[host]['tcp'][int(ports)]["state"] 
	print "port " + str(ports) + " is " + str(state)

def main():
	print ""
	parser = optparse.OptionParser("./Program -H <Target Host> -P <Target Ports separated by commas>")
	parser.add_option("-H", dest="ObjHost", type="string", help="Specify the target host")
	parser.add_option("-P", dest="ObjPort", type="string", help="Specify the target ip host")

	(options, args) = parser.parse_args()

	ObjHost = options.ObjHost
	ObjPorts = str(options.ObjPort).split(",")

	if(ObjHost == None) | (ObjPorts == None):
		parser.print_help()
		exit(0)
		print ""

	for ports in ObjPorts:
		NmapScan(ObjHost, ports)


if __name__ == '__main__':
	main()

